"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2888],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=d(n),u=i,f=m["".concat(s,".").concat(u)]||m[u]||c[u]||r;return n?a.createElement(f,o(o({ref:t},p),{},{components:n})):a.createElement(f,o({ref:t},p))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var d=2;d<r;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6280:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var a=n(7462),i=(n(7294),n(3905));const r={id:"sdk-compatibility",title:"AWS SDK Compatibility",slug:"../dev-guide/sdk-compatibility"},o=void 0,l={unversionedId:"dev_guide/sdk-compatibility",id:"dev_guide/sdk-compatibility",title:"AWS SDK Compatibility",description:"This guide describes key differences from the AWS .NET SDK and how to make the code backward compatible.",source:"@site/docs/dev_guide/sdk-compatibility.md",sourceDirName:"dev_guide",slug:"/dev-guide/sdk-compatibility",permalink:"/EfficientDynamoDb/docs/dev-guide/sdk-compatibility",draft:!1,editUrl:"https://github.com/alloczero/EfficientDynamoDb/edit/main/website/docs/dev_guide/sdk-compatibility.md",tags:[],version:"current",frontMatter:{id:"sdk-compatibility",title:"AWS SDK Compatibility",slug:"../dev-guide/sdk-compatibility"},sidebar:"someSidebar",previous:{title:"Low-Level API",permalink:"/EfficientDynamoDb/docs/dev-guide/low-level"},next:{title:"GetItem",permalink:"/EfficientDynamoDb/docs/api-reference/builders/get-item"}},s={},d=[{value:"Attributes",id:"attributes",level:2},{value:"Credentials",id:"credentials",level:2},{value:"Operations",id:"operations",level:2},{value:"DateTimes",id:"datetimes",level:2}],p={toc:d},m="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This guide describes key differences from the AWS .NET SDK and how to make the code backward compatible."),(0,i.kt)("h2",{id:"attributes"},"Attributes"),(0,i.kt)("p",null,"By default, class properties are not mapped to table attributes, and you have to specify the ",(0,i.kt)("inlineCode",{parentName:"p"},"[DynamoDbProperty]")," attribute explicitly.\nIt also means that the ",(0,i.kt)("inlineCode",{parentName:"p"},"[DynamoDbIgnore]")," attribute is no longer needed."),(0,i.kt)("p",null,"There are no ",(0,i.kt)("inlineCode",{parentName:"p"},"[DynamoDbHashKey]")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"[DynamoDbRangeKey]")," attributes for hash and sort key anymore.\nYou should use ",(0,i.kt)("inlineCode",{parentName:"p"},"[DynamoDbProperty]")," and set the ",(0,i.kt)("inlineCode",{parentName:"p"},"AttributeType")," property to the correct type."),(0,i.kt)("p",null,"Check out the  ",(0,i.kt)("a",{parentName:"p",href:"/EfficientDynamoDb/docs/dev_guide/dev-guide/high-level/attributes#mapping-primary-key"},"attributes guide")," for more info."),(0,i.kt)("h2",{id:"credentials"},"Credentials"),(0,i.kt)("p",null,"By default, EfficientDynamoDb uses its own credential entities. However, sometimes it's beneficial to use credentials flow from the official .NET AWS SDK. E.g., you have complex credentials retrieving patterns that are not supported by EfficientDynamoDb natively yet, or you prefer using battle-tested code for such critical pieces as credentials management."),(0,i.kt)("p",null,"To integrate official ",(0,i.kt)("inlineCode",{parentName:"p"},"Amazon.Runtime.AWSCredentials")," objects follow this simple steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Install the ",(0,i.kt)("a",{parentName:"li",href:"https://www.nuget.org/packages/EfficientDynamoDb.Credentials.AWSSDK/"},"EfficientDynamoDb.Credentials.AWSSDK nuget package")),(0,i.kt)("li",{parentName:"ol"},"Use extension method ",(0,i.kt)("inlineCode",{parentName:"li"},"ToCredentialsProvider()")," to convert ",(0,i.kt)("inlineCode",{parentName:"li"},"AWSCredentials")," into the ",(0,i.kt)("inlineCode",{parentName:"li"},"IAwsCredentialsProvider")," which is accepted by ",(0,i.kt)("inlineCode",{parentName:"li"},"DynamoDbContextConfig"),".")),(0,i.kt)("p",null,"The following example shows how to integrate ",(0,i.kt)("inlineCode",{parentName:"p"},"EnvironmentVariablesAWSCredentials")," from the AWS SDK into EfficientDynamoDb."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},"var awsSdkCredentials = new EnvironmentVariablesAWSCredentials(); // AWS SDK credentials class\nvar config = new DynamoDbContextConfig(RegionEndpoint.USEast1, awsSdkCredentials.ToCredentialsProvider());\nvar context = new DynamoDbContext(config);\n")),(0,i.kt)("h2",{id:"operations"},"Operations"),(0,i.kt)("p",null,"In EfficientDynamoDb operation names match the names in DynamoDB itself. E.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"LoadAsync(...)")," in official SDK becomes ",(0,i.kt)("inlineCode",{parentName:"p"},"GetItemAsync(...)")," in EfficientDynamoDb."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"SaveAsync(...)")," in official SDK uses ",(0,i.kt)("inlineCode",{parentName:"p"},"UpdateItem")," operation under the hood but accepts a full item like ",(0,i.kt)("inlineCode",{parentName:"p"},"PutItem"),".\nEfficientDynamoDb supports both ",(0,i.kt)("inlineCode",{parentName:"p"},"UpdateItemAsync(...)")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"PutItemAsync(...)")," that behave as intended by DynamoDB (i.e., former updates only specified properties and later replaces the full item)."),(0,i.kt)("p",null,"For compatibility reasons, EfficientDynamoDb provides ",(0,i.kt)("inlineCode",{parentName:"p"},"SaveAsync(...)")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"DeleteAsync(...)")," extension methods that mock the behavior of the official SDK.\nHowever, it's highly encouraged to use native API suitable for your use-case because they scale better and lead to better table designs."),(0,i.kt)("p",null,"Keep in mind that ",(0,i.kt)("inlineCode",{parentName:"p"},"[DynamoDbVersion]")," attribute will only have an effect while using ",(0,i.kt)("inlineCode",{parentName:"p"},"SaveAsync")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"DeleteAsync")," extension methods."),(0,i.kt)("h2",{id:"datetimes"},"DateTimes"),(0,i.kt)("p",null,"AWS SDK has several ",(0,i.kt)("inlineCode",{parentName:"p"},"DateTime")," flaws, which are the reason why the default behavior was changed:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"SDK converts and saves all dates as UTC, even when a timezone is unknown (",(0,i.kt)("inlineCode",{parentName:"li"},"DateTimeKind.Unspecified"),")."),(0,i.kt)("li",{parentName:"ul"},"SDK completely ignores timezone from the date string and always converts dates back to local using the current server timezone.")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null}),(0,i.kt)("th",{parentName:"tr",align:null},"AWS SDK"),(0,i.kt)("th",{parentName:"tr",align:null},"EfficientDynamoDb"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Stores Local as"),(0,i.kt)("td",{parentName:"tr",align:null},"UTC"),(0,i.kt)("td",{parentName:"tr",align:null},"Local")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Stores UTC as"),(0,i.kt)("td",{parentName:"tr",align:null},"UTC"),(0,i.kt)("td",{parentName:"tr",align:null},"UTC")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Stores Unspecified as"),(0,i.kt)("td",{parentName:"tr",align:null},"UTC"),(0,i.kt)("td",{parentName:"tr",align:null},"Unspecified")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Persists ",(0,i.kt)("inlineCode",{parentName:"td"},"DateTime.Kind")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Format"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffK")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"O")," ISO8601")))),(0,i.kt)("p",null,"To make ",(0,i.kt)("inlineCode",{parentName:"p"},"DateTime")," logic backward compatible with AWS SDK, use ",(0,i.kt)("inlineCode",{parentName:"p"},"SdkDateTimeDdbConverter"),"."))}c.isMDXComponent=!0}}]);