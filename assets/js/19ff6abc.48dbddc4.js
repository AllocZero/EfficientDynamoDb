"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9063],{5378:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"dev_guide/high_level/batch","title":"Batch Operations","description":"DynamoDB provides two batch operations:","source":"@site/docs/dev_guide/high_level/batch.md","sourceDirName":"dev_guide/high_level","slug":"/dev-guide/high-level/batch","permalink":"/EfficientDynamoDb/docs/dev-guide/high-level/batch","draft":false,"unlisted":false,"editUrl":"https://github.com/alloczero/EfficientDynamoDb/edit/main/website/docs/dev_guide/high_level/batch.md","tags":[],"version":"current","frontMatter":{"id":"batch","title":"Batch Operations","slug":"../../dev-guide/high-level/batch"},"sidebar":"someSidebar","previous":{"title":"Writing Data","permalink":"/EfficientDynamoDb/docs/dev-guide/high-level/write"},"next":{"title":"Transactions","permalink":"/EfficientDynamoDb/docs/dev-guide/high-level/transact"}}');var s=i(3420),r=i(5404);const a={id:"batch",title:"Batch Operations",slug:"../../dev-guide/high-level/batch"},c=void 0,o={},h=[{value:"BatchGetItem",id:"batchgetitem",level:2},{value:"BatchWriteItem",id:"batchwriteitem",level:2}];function l(e){const t={code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"DynamoDB provides two batch operations:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"BatchGetItem"})," - Read multiple items from one or more tables."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"BatchWriteItem"})," -  Put or delete multiple items in one or more tables."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"EfficientDynamoDb automatically delays and retries if the batch operation returns unprocessed items,\nwhich can happen when provisioned throughput is exceeded, the size limit is reached, or an internal DynamoDB error occurred."}),"\n",(0,s.jsx)(t.h2,{id:"batchgetitem",children:"BatchGetItem"}),"\n",(0,s.jsx)(t.p,{children:"Reads up to 100 items in a single request."}),"\n",(0,s.jsxs)(t.p,{children:["Each entity's primary key is configured using ",(0,s.jsx)(t.code,{children:"Batch.GetItem"})," factory method."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:' var items = await context.BatchGet()\n     .WithItems(\n         Batch.GetItem<EntityClass>().WithPrimaryKey("partitionKey", "sortKey_1"),\n         Batch.GetItem<EntityClass>().WithPrimaryKey("partitionKey", "sortKey_2")\n     )\n     .ToListAsync<EntityClass>();\n'})}),"\n",(0,s.jsxs)(t.p,{children:["When strong consistency or a projection is needed, a more sophisticated ",(0,s.jsx)(t.code,{children:"FromTables"})," method can be used:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:' var items = await context.BatchGet()\n     .FromTables(\n        Batch.FromTable<EntityClass>()\n            .WithConsistentRead(true)\n            .WithProjectedAttributes<ProjectionClass>()\n            .WithItems(\n                Batch.GetItem<EntityClass>().WithPrimaryKey("partitionKey", "sortKey_1"),\n                Batch.GetItem<EntityClass>().WithPrimaryKey("partitionKey", "sortKey_2")\n                )\n    )\n     .ToListAsync<EntityClass>();\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsxs)(t.em,{children:["Entities of different types can be retrieved by using ",(0,s.jsx)(t.code,{children:"AsDocuments()"})," method the same way as for other read operations."]})}),"\n",(0,s.jsx)(t.h2,{id:"batchwriteitem",children:"BatchWriteItem"}),"\n",(0,s.jsx)(t.p,{children:"Puts or deletes up to 25 items in a single request."}),"\n",(0,s.jsxs)(t.p,{children:["Each write operation is configured using either ",(0,s.jsx)(t.code,{children:"Batch.PutItem"})," or ",(0,s.jsx)(t.code,{children:"Batch.DeleteItem"})," factory method."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'await context.BatchWrite()\n    .WithItems(\n        Batch.PutItem(new UserEntity("John", "Doe")),\n        Batch.DeleteItem<UserEntity>().WithPrimaryKey("partitionKey", "sortKey")\n    )\n    .ExecuteAsync();\n'})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},5404:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>c});var n=i(6672);const s={},r=n.createContext(s);function a(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);